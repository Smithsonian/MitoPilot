<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>NOAA SEDNA Setup • MitoPilot</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="NOAA SEDNA Setup">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MitoPilot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/MitoPilot.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/FAQ.html">Frequently Asked Questions</a></li>
    <li><a class="dropdown-item" href="../articles/NMNH-Hydra.html">NMNH Hydra Setup</a></li>
    <li><a class="dropdown-item" href="../articles/NOAA-SEDNA.html">NOAA SEDNA Setup</a></li>
    <li><a class="dropdown-item" href="../articles/Fish-Mitogenome-Curation.html">Fish Mitogenome Curation</a></li>
    <li><a class="dropdown-item" href="../articles/custom_dbs.html">Building Custom Databases</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Smithsonian/MitoPilot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>NOAA SEDNA Setup</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Smithsonian/MitoPilot/blob/main/vignettes/NOAA-SEDNA.Rmd" class="external-link"><code>vignettes/NOAA-SEDNA.Rmd</code></a></small>
      <div class="d-none name"><code>NOAA-SEDNA.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="how-to-use-mitopilot-on-the-noaa-nmfs-senda-computing-cluster">How to use MitoPilot on the NOAA NMFS SENDA computing cluster<a class="anchor" aria-label="anchor" href="#how-to-use-mitopilot-on-the-noaa-nmfs-senda-computing-cluster"></a>
</h2>
<p>You will need an account to access the SEDNA computing cluster.
Detailed instructions can be found <a href="https://docs.google.com/document/d/1nn0T0OWEsQCBoCdaH6DSY69lQSbK3XnPlseyyQuU2Lc/edit?usp=sharing" class="external-link">here</a>.
Or contact Krista Nichols (<a href="mailto:krista.nichols@noaa.gov" class="email">krista.nichols@noaa.gov</a>) for more information.</p>
<div class="section level3">
<h3 id="first-time-setup">First time setup<a class="anchor" aria-label="anchor" href="#first-time-setup"></a>
</h3>
<p>For first time setup, you will need to create a Mamba environment for
the MitoPilot dependencies Nextflow and Singularity. We will also
include a version of R in this environment; there are some issues
installing the pipeline with the cluster’s R module.</p>
<p>Log in to the NOAA NMFS VPN, then log in to SEDNA. If you’ve never
used mamba on SEDNA before, run the following.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">/opt/bioinformatics/mambaforge/bin/mamba</span> init</span></code></pre></div>
<p>Let’s create the <code>MitoPilot_deps</code> mamba environment. This
may take a while.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">mamba</span> create <span class="at">--name</span> MitoPilot_deps bioconda::nextflow conda-forge::singularity conda-forge::zlib conda-forge::r-base <span class="at">-y</span></span></code></pre></div>
<p>You can now call <code>nextflow</code> and <code>singularity</code>
from anywhere on the cluster, as long as this
<code>MitoPilot_deps</code> environment is activated.</p>
</div>
<div class="section level3">
<h3 id="installing-mitopilot">Installing MitoPilot<a class="anchor" aria-label="anchor" href="#installing-mitopilot"></a>
</h3>
<p>Time to install MitoPilot! Activate your new mamba environment and
launch R.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># activate the mamba environment you just created</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">mamba</span> activate MitoPilot_deps</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># launch R</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="ex">R</span> </span></code></pre></div>
<p>In the new R session, run the following to install MitoPilot. It will
take a while to install all of the necessary dependencies.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"BiocManager"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BiocManager"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="st">"Smithsonian/MitoPilot"</span><span class="op">)</span></span></code></pre></div>
<p>If install was successful, you can exit the R session using
<code><a href="https://rdrr.io/r/base/quit.html" class="external-link">quit()</a></code>.</p>
</div>
<div class="section level3">
<h3 id="updating-mitopilot">Updating MitoPilot<a class="anchor" aria-label="anchor" href="#updating-mitopilot"></a>
</h3>
<p>If you need to update MitoPilot, simply run the BiocManager
installation command again. If you would like to ensure that you’re
using the latest MitoPilot version, run
<code>remove.packages("MitoPilot")</code> prior to installation.</p>
<p>After updating MitoPilot, we recommend restarting R (In the RStudio
menu, Session &gt; Restart R) and the reloading the package with
<code><a href="https://github.com/Smithsonian/MitoPilot" class="external-link">library(MitoPilot)</a></code>.</p>
</div>
<div class="section level3">
<h3 id="setting-up-rstudio-server">Setting up RStudio server<a class="anchor" aria-label="anchor" href="#setting-up-rstudio-server"></a>
</h3>
<p>Next we need to set up RStudio server. The version of Rstudio server
must match the R version in your <code>MitoPilot_deps</code> mamba
environment. You should be able to see the R version by running
<code>mamba activate MitoPilot_deps;mamba list</code>.</p>
<p>In a SEDNA terminal, run the following. It may take a few minutes to
download and set up the Singularity image file.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Make a directory to host R-studio. </span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> ~/rstudio</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="bu">cd</span> ~/rstudio</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co"># activate cluster's singularity environment</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="ex">mamba</span> activate singularity-3.8.6</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co"># Pull R studio from singularity</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co"># change version number if needed</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="ex">singularity</span> pull docker://rocker/rstudio:4.4.2</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co"># additional setup</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> run var-lib-rstudio-server</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="bu">printf</span> <span class="st">'provider=sqlite\ndirectory=/var/lib/rstudio-server\n'</span> <span class="op">&gt;</span> database.conf</span></code></pre></div>
<p>Now let’s make a helper script to launch RStudio server. Again, make
sure you’re setting <code>Rstudio_version</code> correctly.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># set up bin directory if it doesn't exist</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">mkdir</span> ~/bin </span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co"># create helper script</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> ~/bin/start-rstudio-server-MitoPilot <span class="op">&lt;&lt;'EOL'</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="st">#!/bin/bash</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="st"># script to start Rstudio server </span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="st"># and print instructions on how to connect</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="st"># modify to match your Rstudio server version</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="st">Rstudio_version="4.4.2"</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="st">cd ~/rstudio</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="st">source ~/.bashrc</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="st">mamba activate MitoPilot_deps</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="st"># Assign yourself a port</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="st">PORT=$(shuf -i 8000-9000 -n 1)</span></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="st">HOST=$( hostname )</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a><span class="st">GREEN='\033[0;32m' # green ANSI</span></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a><span class="st">RED='\033[0;31m' # red ANSI</span></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a><span class="st">NC='\033[0m' # no color ANSI</span></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a><span class="st">echo ""</span></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a><span class="st">echo -e "${GREEN}TO ACCESS RSTUDIO SERVER${NC}"</span></span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a><span class="st">echo "In a terminal on your local system, run the following command:"</span></span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a><span class="st">echo "ssh -N -L 8787:${HOST}:${PORT} ${USER}@sedna.nwfsc2.noaa.gov"</span></span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a><span class="st">echo ""</span></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a><span class="st">echo "Enter your password when prompted"</span></span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a><span class="st">echo "If successful, nothing will happen"</span></span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a><span class="st">echo "Then open http://localhost:8787 on a local web browser"</span></span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a><span class="st">echo "" </span></span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a><span class="st">echo -e "${RED}NOTE:${NC} This window and your local terminal session"</span></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a><span class="st">echo "must remain open in order to access the Rstudio server"</span></span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a><span class="st">echo ""</span></span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a></span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a><span class="st">mamba activate </span></span>
<span id="cb6-41"><a href="#cb6-41" tabindex="-1"></a></span>
<span id="cb6-42"><a href="#cb6-42" tabindex="-1"></a><span class="st"># set Singularity temp dir, if needed</span></span>
<span id="cb6-43"><a href="#cb6-43" tabindex="-1"></a><span class="st"># if not set, Singularity will write to /tmp on the compute nodes</span></span>
<span id="cb6-44"><a href="#cb6-44" tabindex="-1"></a><span class="st">#mkdir -p "${HOME}/.singularity/temp"</span></span>
<span id="cb6-45"><a href="#cb6-45" tabindex="-1"></a><span class="st">#export SINGULARITY_TMPDIR="${HOME}/.singularity/temp"</span></span>
<span id="cb6-46"><a href="#cb6-46" tabindex="-1"></a></span>
<span id="cb6-47"><a href="#cb6-47" tabindex="-1"></a><span class="st">singularity exec \</span></span>
<span id="cb6-48"><a href="#cb6-48" tabindex="-1"></a><span class="st"> --bind run:/run,var-lib-rstudio-server:/var/lib/rstudio-server,database.conf:/etc/rstudio/database.conf,${HOME}/.conda/envs/MitoPilot_deps/bin,${HOME}/.conda/envs/MitoPilot_deps/lib \</span></span>
<span id="cb6-49"><a href="#cb6-49" tabindex="-1"></a><span class="st"> --env APPEND_PATH="${HOME}/.conda/envs/MitoPilot_deps/bin:${HOME}/.conda/envs/MitoPilot_deps/lib" \</span></span>
<span id="cb6-50"><a href="#cb6-50" tabindex="-1"></a><span class="st"> rstudio_${Rstudio_version}.sif \</span></span>
<span id="cb6-51"><a href="#cb6-51" tabindex="-1"></a><span class="st"> rserver --www-address=0.0.0.0 --www-port=${PORT} --server-user=${USER}</span></span>
<span id="cb6-52"><a href="#cb6-52" tabindex="-1"></a><span class="op">EOL</span></span>
<span id="cb6-53"><a href="#cb6-53" tabindex="-1"></a></span>
<span id="cb6-54"><a href="#cb6-54" tabindex="-1"></a><span class="co"># make script executable</span></span>
<span id="cb6-55"><a href="#cb6-55" tabindex="-1"></a><span class="fu">chmod</span> 755 ~/bin/start-rstudio-server-MitoPilot</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="launching-rstudio-server">Launching RStudio server<a class="anchor" aria-label="anchor" href="#launching-rstudio-server"></a>
</h3>
<p>To launch RStudio server, first start an interactive session in
SENDA. You won’t need much computing resources, since MitoPilot uses
Nextflow to distribute the analyses.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">srun</span> <span class="at">-c</span> 2 <span class="at">--mem</span><span class="op">=</span>16GB <span class="at">-p</span> standard <span class="at">--pty</span> /bin/bash</span></code></pre></div>
<p>Then run the following.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">mamba</span> activate MitoPilot_deps</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">start-rstudio-server-MitoPilot</span></span></code></pre></div>
<p>Follow the instructions to access your RStudio server session. They
should look something like this.</p>
<pre><code>TO ACCESS RSTUDIO SERVER
In a terminal on your local system, run the following command:
ssh -N -L 8787:node01.cluster:8377 dmacguigan@sedna.nwfsc2.noaa.gov

Enter your password when prompted
If successful, nothing will happen
Then open http://localhost:8787 on a local web browser

NOTE: This window and your local terminal session
must remain open in order to access the Rstudio server</code></pre>
</div>
<div class="section level3">
<h3 id="launching-mitopilot">Launching MitoPilot<a class="anchor" aria-label="anchor" href="#launching-mitopilot"></a>
</h3>
<p>Once you have opened the RStudio server session, run
<code><a href="https://github.com/Smithsonian/MitoPilot" class="external-link">library(MitoPilot)</a></code> to load the package. You should see a
message about Nextflow if successful.</p>
<p>Want to learn how to use MitoPilot? Check out the <a href="https://Smithsonian.github.io/MitoPilot/articles/test-project.html" class="external-link">Test
Project Tutorial</a>.</p>
</div>
<div class="section level3">
<h3 id="running-large-mitopilot-jobs">Running Large MitoPilot Jobs<a class="anchor" aria-label="anchor" href="#running-large-mitopilot-jobs"></a>
</h3>
<p>SEDNA does not currently support running Nextflow within the R Shiny
GUI. For a small number of samples, you could run Nextflow in an
interactive session. However, this requires you to maintain an open
connection to the cluster. For large datasets, there may be issues
restarting if the connection breaks while Nextflow is running.</p>
<p>Therefore, if you have a large number of samples to process (more
than a few dozen), we recommend running the assemble and annotate
MitoPilot modules as batch jobs.</p>
<p>First, initialize your new project and modify any desired parameters
using the GUI. Once ready, click <code>UPDATE</code>. A new window
should appear.</p>
<p><img src="figures%2Ftest-project%2F8.png"></p>
<p>Rather than clicking the <code>Start Nextflow</code> button, copy the
Nextflow command and create a submission script. We have provided a
template below. You may wish to modify the job name
(<code>--job-name</code>) and the output file names
(<code>--output</code> and <code>--error</code>).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#SBATCH --job-name=MitoPilot_assembly # MODIFY THIS IF DESIRED</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co">#SBATCH --output=MitoPilot_assembly.out # MODIFY THIS IF DESIRED</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">#SBATCH --error=MitoPilot_assembly.err # MODIFY THIS IF DESIRED</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co">#SBATCH -p standard</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">#SBATCH -c 1</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co">#SBATCH --mem=8G</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co">#SBATCH -t 24:00:00</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="bu">echo</span> + <span class="kw">`</span><span class="fu">date</span><span class="kw">`</span> job <span class="va">$SLURM_JOB_NAME</span> started in <span class="va">$SLURM_JOB_PARTITION</span> with jobID=<span class="va">$SLURM_JOBID</span> on <span class="va">$SLURM_JOB_NODELIST</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="ex">mamba</span> activate MitoPilot_deps</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a><span class="co"># MITOPILOT NEXTFLOW COMMAND, example below</span></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="ex">nextflow</span> <span class="at">-log</span> /home/dmacguigan/MitoPilot/test/2025_1_2/.logs/nextflow.log run /home/dmacguigan/.conda/envs/MitoPilot_deps/lib/R/library/MitoPilot/nextflow <span class="at">-c</span> /home/dmacguigan/MitoPilot/test/2025_1_2/.config <span class="at">-entry</span> WF1</span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a><span class="bu">echo</span> = <span class="kw">`</span><span class="fu">date</span><span class="kw">`</span> job <span class="va">$SLURM_JOB_NAME</span> done</span></code></pre></div>
<p>Move the submission script into your MitoPilot run directory (in the
above example, <code>/home/dmacguigan/MitoPilot/test/2025_1_2/</code>).
Then submit the job using <code>sbatch MY_SCRIPT_NAME.sh</code>.</p>
<p>You can monitor the progress of this job using the
<code>squeue</code> command and by checking on the log files. Once the
job is done, you can relaunch the GUI to inspect the results. The same
approach can be used for the annotate module.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Devin Leopold.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
